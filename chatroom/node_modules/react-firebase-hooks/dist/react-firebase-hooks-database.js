!function(e,r){"use strict";var n=function(){return(n=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var u in r=arguments[n])Object.prototype.hasOwnProperty.call(r,u)&&(e[u]=r[u]);return e}).apply(this,arguments)},t=function(e,r){if(e.exists){var t,u=e.val();return function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)}(u)?n({},u,r?((t={})[r]=e.key,t):null):u}},u={loading:!0,value:{keys:[],values:[]}},o=function(e,r){switch(r.type){case"add":return r.snapshot?n({},e,{error:void 0,value:a(e.value,r.snapshot,r.previousKey)}):e;case"change":return r.snapshot?n({},e,{error:void 0,value:i(e.value,r.snapshot)}):e;case"error":return n({},e,{error:r.error,loading:!1,value:{keys:void 0,values:void 0}});case"move":return r.snapshot?n({},e,{error:void 0,value:c(e.value,r.snapshot,r.previousKey)}):e;case"remove":return r.snapshot?n({},e,{error:void 0,value:s(e.value,r.snapshot)}):e;case"reset":return u;case"value":return n({},e,{error:void 0,loading:!1});case"empty":return n({},e,{loading:!1,value:{keys:void 0,values:void 0}});default:return e}},a=function(e,r,n){if(!r.key)return e;var t=e.keys,u=e.values;if(!n)return{keys:t?[r.key].concat(t):[r.key],values:u?[r].concat(u):[r]};var o=t?t.indexOf(n):0;return{keys:t?t.slice(0,o+1).concat([r.key],t.slice(o+1)):[r.key],values:u?u.slice(0,o+1).concat([r],u.slice(o+1)):[r]}},i=function(e,r){if(!r.key)return e;var t=e.keys,u=e.values,o=t?t.indexOf(r.key):0;return n({},e,{values:u?u.slice(0,o).concat([r],u.slice(o+1)):[r]})},s=function(e,r){if(!r.key)return e;var n=e.keys,t=e.values,u=n?n.indexOf(r.key):0;return{keys:n?n.slice(0,u).concat(n.slice(u+1)):[],values:t?t.slice(0,u).concat(t.slice(u+1)):[]}},c=function(e,r,n){var t=s(e,r);return a(t,r,n)},l=function(e){return{loading:void 0===e||null===e,value:e}},v=function(e){var t=e?e():void 0,u=r.useReducer(function(e,r){switch(r.type){case"error":return n({},e,{error:r.error,loading:!1,value:void 0});case"reset":return l(r.defaultValue);case"value":return n({},e,{error:void 0,loading:!1,value:r.value});default:return e}},l(t)),o=u[0],a=u[1];return{error:o.error,loading:o.loading,reset:function(){var r=e?e():void 0;a({type:"reset",defaultValue:r})},setError:function(e){a({type:"error",error:e})},setValue:function(e){a({type:"value",value:e})},value:o.value}},f=function(e,r){var n=!e&&!r,t=!!e&&!!r&&e.isEqual(r);return n||t},d=function(e,n){return function(e,n,t){var u=r.useRef(e);return r.useEffect(function(){n(e,u.current)||(u.current=e,t&&t())}),u}(e,f,n)},y=function(e){var n=r.useReducer(o,u),t=n[0],a=n[1],i=d(e,function(){return a({type:"reset"})}),s=function(e,r){a({type:"add",previousKey:r,snapshot:e})},c=function(e){a({type:"change",snapshot:e})},l=function(e,r){a({type:"move",previousKey:r,snapshot:e})},v=function(e){a({type:"remove",snapshot:e})},f=function(e){a({type:"error",error:e})},y=function(){a({type:"value"})};return r.useEffect(function(){var e=i.current;if(e)return e.once("value",y,f),e.on("child_added",s,f),e.on("child_changed",c,f),e.on("child_moved",l,f),e.on("child_removed",v,f),function(){e.off("child_added",s),e.off("child_changed",c),e.off("child_moved",l),e.off("child_removed",v)};a({type:"empty"})},[i.current]),[t.value.values,t.loading,t.error]},p=function(e){var n=v(),t=n.error,u=n.loading,o=n.reset,a=n.setError,i=n.setValue,s=n.value,c=d(e,o);return r.useEffect(function(){var e=c.current;if(e)return e.on("value",i,a),function(){e.off("value",i)};i(void 0)},[c.current]),[s,u,t]};e.useList=y,e.useListKeys=function(e){var r=y(e),n=r[0],t=r[1],u=r[2];return[n?n.map(function(e){return e.key}):void 0,t,u]},e.useListVals=function(e,n){var u=y(e),o=u[0],a=u[1],i=u[2];return[r.useMemo(function(){return o?o.map(function(e){return t(e,n?n.keyField:void 0)}):void 0},[o,n&&n.keyField]),a,i]},e.useObject=p,e.useObjectVal=function(e,n){var u=p(e),o=u[0],a=u[1],i=u[2];return[r.useMemo(function(){return o?t(o,n?n.keyField:void 0):void 0},[o,n&&n.keyField]),a,i]}}(this["react-firebase-hooks"]=this["react-firebase-hooks"]||{},react);
//# sourceMappingURL=react-firebase-hooks-database.js.map
